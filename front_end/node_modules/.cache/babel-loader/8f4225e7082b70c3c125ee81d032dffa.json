{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\Abdul\\\\Documents\\\\GitHub\\\\PWD-Pharma-2-JCWM01\\\\front_end\\\\src\\\\pages\\\\Cart.jsx\";\nimport React from \"react\";\nimport { Link, Redirect } from \"react-router-dom\";\nimport { connect } from 'react-redux';\nimport { URL_API } from \"../helper\";\nimport Axios from 'axios';\nimport { NavItem, Button } from \"reactstrap\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\n\nclass Cart extends React.Component {\n  constructor(...args) {\n    super(...args);\n    this.state = {\n      dbcart: [],\n      id_cart: 0,\n      editQtyChecked: false,\n      cart_qty: 0,\n      total: 0,\n      stock: 0,\n      subtotal: 0,\n      tax: 0,\n      grandTotalPrice: 0,\n      isCheckoutMode: false,\n      paymentMethod: \"\",\n      expedition: \"\",\n      insertQuery: \"\",\n      redirect: false\n    };\n\n    this.inputHandler = e => {\n      const {\n        name,\n        value\n      } = e.target;\n      this.setState({\n        [name]: value\n      });\n    };\n\n    this.checkoutModeToggle = () => {\n      this.setState({\n        isCheckoutMode: !this.state.isCheckoutMode\n      });\n    };\n\n    this.getData = () => {\n      Axios.get(`${URL_API}/cart/getCart/${this.props.userGlobal.id_user}`).then(res => {\n        this.setState({\n          dbcart: res.data.results,\n          cart_qty: res.data.cart_qty,\n          total: res.data.total,\n          stock: res.data.stock\n        });\n      }).catch(err => {\n        alert(\"Cannot Get Data\");\n        console.log(err);\n      });\n    };\n\n    this.updateQty = cartId => {\n      const {\n        cart_qty\n      } = this.state;\n      this.setState({\n        editQtyChecked: false\n      });\n      Axios.patch(`${URL_API}/cart/updateQty/${cartId}`, {\n        cart_qty\n      }).then(() => {\n        this.getData();\n        alert(\"berhasil update Quantity\");\n        window.location.reload();\n      }).catch(err => {\n        console.log(err);\n      });\n    };\n\n    this.deleteBtnHandler = cartId => {\n      Axios.delete(`${URL_API}/cart/deleteCart/${cartId}`).then(() => {\n        alert(\"berhasil delete cart\");\n        this.getData();\n        window.location.reload();\n      }).catch(() => {\n        alert(\"terjadi kesalahan di server\");\n      });\n    };\n\n    this.subtotalPrice = () => {\n      Axios.post(`${URL_API}/cart/subtotal-price`, {\n        id_user: this.props.userGlobal.id_user\n      }).then(res => {\n        this.setState({\n          subtotal: res.data.results[0].subtotal,\n          tax: res.data.results[0].subtotal * 0.1,\n          grandTotalPrice: res.data.results[0].subtotal + res.data.results[0].subtotal * 0.1 + this.state.dbcart.length * 10000\n        });\n      }).catch(err => {\n        alert(\"Cannot Count Cart Subtotal Price\");\n        console.log(err);\n      });\n    };\n\n    this.payBtnHandler = () => {\n      this.insertTransaction();\n      this.clearCart();\n      this.setState({\n        redirect: true\n      });\n    };\n\n    this.insertTransaction = () => {\n      Axios.post(`${URL_API}/cart/pay`, {\n        insertQuery: this.mapInsertQuery().toString()\n      }).then(res => {\n        alert(\"Please Continue to Upload Your Proof of Payment\");\n        console.log(res);\n      }).catch(err => {\n        alert(\"Payment Error\");\n        console.log(err);\n      });\n    };\n\n    this.clearCart = () => {\n      Axios.patch(`${URL_API}/cart/clear-cart`, {\n        deleteQuery: this.mapDeleteQuery()\n      }).then(res => {\n        alert(\"Cart will be Cleared After Checkout\");\n        console.log(res);\n      }).catch(err => {\n        alert(\"Clear Cart After Checkout Error\");\n        console.log(err);\n      });\n    };\n\n    this.mapDeleteQuery = () => {\n      return this.state.dbcart.map((item, index) => {\n        return item.id_cart;\n      });\n    };\n\n    this.mapInsertQuery = () => {\n      const d = new Date();\n      return this.state.dbcart.map((item, index) => {\n        return `(null, ${this.props.userGlobal.id_user}, ${item.cart_qty}, ${item.product_price * item.cart_qty * 0.1}, ${item.product_price * item.cart_qty}, '${d.getFullYear()}-${d.getMonth() + 1}-${d.getDate()} ${d.getHours()}:${d.getMinutes()}:${d.getSeconds()}', '${this.state.paymentMethod}', '${this.state.expedition}', 10000, null, 'unpaid', ${item.id_product}, null)`;\n      });\n    };\n\n    this.printData = () => {\n      return this.state.dbcart.map((item, index) => {\n        return /*#__PURE__*/_jsxDEV(\"tr\", {\n          children: [/*#__PURE__*/_jsxDEV(\"td\", {\n            className: \"align-middle\",\n            children: index + 1\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 160,\n            columnNumber: 11\n          }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n            className: \"align-middle\",\n            children: item.product_name\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 161,\n            columnNumber: 11\n          }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n            className: \"align-middle\",\n            children: [\"Rp.\", item.product_price.toLocaleString(\"id\")]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 162,\n            columnNumber: 11\n          }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n            className: \"align-middle\",\n            children: /*#__PURE__*/_jsxDEV(\"img\", {\n              src: item.product_image,\n              alt: \"\",\n              style: {\n                height: \"125px\"\n              }\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 164,\n              columnNumber: 13\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 163,\n            columnNumber: 11\n          }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n            className: \"align-middle\",\n            children: [!this.state.editQtyChecked ? /*#__PURE__*/_jsxDEV(\"input\", {\n              className: \"align-middle\",\n              name: \"cart_qty\",\n              min: \"1\",\n              disabled: \"true\",\n              defaultValue: item.cart_qty,\n              type: \"number\",\n              style: {\n                width: \"50px\"\n              },\n              max: item.bottle_stock\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 168,\n              columnNumber: 15\n            }, this) : /*#__PURE__*/_jsxDEV(\"input\", {\n              className: \"align-middle\",\n              onChange: e => this.inputHandler(e),\n              min: \"1\",\n              name: \"cart_qty\",\n              defaultValue: item.cart_qty,\n              type: \"number\",\n              style: {\n                width: \"50px\"\n              },\n              max: item.bottle_stock\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 179,\n              columnNumber: 15\n            }, this), \"bottle\"]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 166,\n            columnNumber: 11\n          }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n            className: \"align-middle\",\n            children: [\"Rp.\", item.total.toLocaleString(\"id\")]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 192,\n            columnNumber: 11\n          }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n            className: \"align-middle\",\n            children: !this.state.editQtyChecked ? /*#__PURE__*/_jsxDEV(_Fragment, {\n              children: [/*#__PURE__*/_jsxDEV(\"button\", {\n                className: \"btn btn-primary\",\n                onClick: () => this.setState({\n                  editQtyChecked: true\n                }),\n                children: \"Edit\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 196,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n                onClick: () => this.deleteBtnHandler(item.id_cart),\n                className: \"btn btn-danger\",\n                children: \"Delete\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 202,\n                columnNumber: 17\n              }, this)]\n            }, void 0, true) : /*#__PURE__*/_jsxDEV(_Fragment, {\n              children: /*#__PURE__*/_jsxDEV(\"button\", {\n                onClick: () => this.updateQty(item.id_cart),\n                className: \"btn btn-primary\",\n                children: \"Save\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 211,\n                columnNumber: 17\n              }, this)\n            }, void 0, false)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 193,\n            columnNumber: 11\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 159,\n          columnNumber: 9\n        }, this);\n      });\n    };\n  }\n\n  componentDidMount() {\n    this.getData();\n    this.subtotalPrice();\n    this.mapInsertQuery();\n    this.mapDeleteQuery();\n  }\n\n  render() {\n    if (!this.props.userGlobal.username) {\n      return /*#__PURE__*/_jsxDEV(Redirect, {\n        to: \"/\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 227,\n        columnNumber: 14\n      }, this);\n    }\n\n    if (this.state.redirect) {\n      return /*#__PURE__*/_jsxDEV(Redirect, {\n        to: \"/transaction\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 231,\n        columnNumber: 14\n      }, this);\n    }\n\n    if (!this.state.dbcart.length) {\n      return /*#__PURE__*/_jsxDEV(\"div\", {\n        style: {\n          display: \"flex\",\n          flexDirection: \"column\",\n          alignItems: \"center\",\n          justifyContent: \"center\",\n          marginTop: \"50px\"\n        },\n        children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n          children: \"Your Cart is Empty\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 237,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"h2\", {\n          children: \"Please Fill your Cart to Start Shopping \\uD83D\\uDE0A\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 238,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 236,\n        columnNumber: 9\n      }, this);\n    }\n\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"p-5 text-center\",\n      children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n        children: \"Cart\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 245,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"row mt-5\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"col-9 text-center\",\n          children: /*#__PURE__*/_jsxDEV(\"table\", {\n            className: \"table\",\n            children: [/*#__PURE__*/_jsxDEV(\"thead\", {\n              className: \"thead-light\",\n              children: /*#__PURE__*/_jsxDEV(\"tr\", {\n                children: [/*#__PURE__*/_jsxDEV(\"th\", {\n                  children: \"no\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 251,\n                  columnNumber: 19\n                }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n                  children: \"Product\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 252,\n                  columnNumber: 19\n                }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n                  children: \"Price\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 253,\n                  columnNumber: 19\n                }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n                  children: \"Image\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 254,\n                  columnNumber: 19\n                }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n                  children: \"Quantity\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 255,\n                  columnNumber: 19\n                }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n                  children: \"Total Price\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 256,\n                  columnNumber: 19\n                }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n                  children: \"Action\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 257,\n                  columnNumber: 19\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 250,\n                columnNumber: 17\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 249,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"tbody\", {\n              children: this.printData()\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 260,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"tfoot\", {\n              className: \"bg-light\",\n              children: /*#__PURE__*/_jsxDEV(\"tr\", {\n                children: /*#__PURE__*/_jsxDEV(\"td\", {\n                  colSpan: \"9\",\n                  children: /*#__PURE__*/_jsxDEV(\"button\", {\n                    onClick: this.checkoutModeToggle,\n                    className: \"btn btn-success\",\n                    children: \"Checkout\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 267,\n                    columnNumber: 21\n                  }, this)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 266,\n                  columnNumber: 19\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 265,\n                columnNumber: 17\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 264,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 248,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 247,\n          columnNumber: 11\n        }, this), this.state.isCheckoutMode ? /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"col-3\",\n          children: /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"card text-left\",\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"card-header\",\n              children: /*#__PURE__*/_jsxDEV(\"strong\", {\n                children: \"Order Summary\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 283,\n                columnNumber: 19\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 282,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"card-body\",\n              children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"d-flex my-2 flex-row justify-content-between align-items-center\",\n                children: [/*#__PURE__*/_jsxDEV(\"span\", {\n                  className: \"font-weight-bold\",\n                  children: \"Subtotal Price\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 287,\n                  columnNumber: 21\n                }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                  children: [\"Rp \", this.state.subtotal.toLocaleString(\"id\"), \" \"]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 288,\n                  columnNumber: 21\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 286,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"d-flex my-2 flex-row justify-content-between align-items-center\",\n                children: [/*#__PURE__*/_jsxDEV(\"span\", {\n                  className: \"font-weight-bold\",\n                  children: \"Tax Fee (10%)\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 291,\n                  columnNumber: 21\n                }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                  children: [\"Rp \", this.state.tax.toLocaleString(\"id\"), \" \"]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 292,\n                  columnNumber: 21\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 290,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"d-flex my-2 flex-row justify-content-between align-items-center\",\n                children: [/*#__PURE__*/_jsxDEV(\"span\", {\n                  className: \"font-weight-bold\",\n                  children: \"Shipping Cost\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 295,\n                  columnNumber: 21\n                }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                  children: [\"Rp \", (this.state.dbcart.length * 10000).toLocaleString(\"id\"), \" \"]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 296,\n                  columnNumber: 21\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 294,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"d-flex my-2 flex-row justify-content-between align-items-center\",\n                children: [/*#__PURE__*/_jsxDEV(\"span\", {\n                  className: \"font-weight-bold\",\n                  children: \"Grand Total Price\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 299,\n                  columnNumber: 21\n                }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                  children: [\"Rp \", this.state.grandTotalPrice.toLocaleString(\"id\"), \" \"]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 300,\n                  columnNumber: 21\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 298,\n                columnNumber: 19\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 285,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"card-body border-top\",\n              children: [/*#__PURE__*/_jsxDEV(\"label\", {\n                htmlFor: \"paymentMethod\",\n                children: \"Payment Method\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 304,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 305,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"select\", {\n                onChange: this.inputHandler,\n                name: \"paymentMethod\",\n                className: \"custom-select\",\n                multiple: true,\n                children: [/*#__PURE__*/_jsxDEV(\"option\", {\n                  value: \"bank transfer\",\n                  selected: true,\n                  children: \"Bank Transfer\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 307,\n                  columnNumber: 21\n                }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n                  value: \"gopay\",\n                  children: \"Gopay\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 310,\n                  columnNumber: 21\n                }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n                  value: \"ovo\",\n                  children: \"Ovo\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 311,\n                  columnNumber: 21\n                }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n                  value: \"paypal\",\n                  children: \"Paypal\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 312,\n                  columnNumber: 21\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 306,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 314,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 315,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"label\", {\n                htmlFor: \"expedition\",\n                children: \"Shipping\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 317,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 318,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"select\", {\n                onChange: this.inputHandler,\n                name: \"expedition\",\n                className: \"form-control\",\n                children: [/*#__PURE__*/_jsxDEV(\"option\", {\n                  value: \"jne\",\n                  children: \"JNE\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 320,\n                  columnNumber: 21\n                }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n                  value: \"j&t\",\n                  children: \"J&T\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 321,\n                  columnNumber: 21\n                }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n                  value: \"tiki\",\n                  children: \"TIKI\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 322,\n                  columnNumber: 21\n                }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n                  value: \"anteraja\",\n                  children: \"Anter Aja\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 323,\n                  columnNumber: 21\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 319,\n                columnNumber: 19\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 303,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"card-footer\",\n              children: /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"d-flex flex-row justify-content-between align-items-center\",\n                children: [/*#__PURE__*/_jsxDEV(\"input\", {\n                  className: \"form-control mx-1\",\n                  type: \"string\",\n                  name: \"payment\",\n                  disabled: \"true\",\n                  defaultValue: `Rp ${this.state.grandTotalPrice.toLocaleString(\"id\")}`\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 329,\n                  columnNumber: 21\n                }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n                  onClick: this.payBtnHandler,\n                  className: \"btn btn-success mx-1\",\n                  children: \"Pay\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 336,\n                  columnNumber: 21\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 328,\n                columnNumber: 19\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 327,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 281,\n            columnNumber: 15\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 279,\n          columnNumber: 13\n        }, this) : null]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 246,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 244,\n      columnNumber: 7\n    }, this);\n  }\n\n}\n\nconst mapStateToProps = state => {\n  return {\n    userGlobal: state.user\n  };\n};\n\nexport default connect(mapStateToProps)(Cart);","map":{"version":3,"sources":["C:/Users/Abdul/Documents/GitHub/PWD-Pharma-2-JCWM01/front_end/src/pages/Cart.jsx"],"names":["React","Link","Redirect","connect","URL_API","Axios","NavItem","Button","Cart","Component","state","dbcart","id_cart","editQtyChecked","cart_qty","total","stock","subtotal","tax","grandTotalPrice","isCheckoutMode","paymentMethod","expedition","insertQuery","redirect","inputHandler","e","name","value","target","setState","checkoutModeToggle","getData","get","props","userGlobal","id_user","then","res","data","results","catch","err","alert","console","log","updateQty","cartId","patch","window","location","reload","deleteBtnHandler","delete","subtotalPrice","post","length","payBtnHandler","insertTransaction","clearCart","mapInsertQuery","toString","deleteQuery","mapDeleteQuery","map","item","index","d","Date","product_price","getFullYear","getMonth","getDate","getHours","getMinutes","getSeconds","id_product","printData","product_name","toLocaleString","product_image","height","width","bottle_stock","componentDidMount","render","username","display","flexDirection","alignItems","justifyContent","marginTop","mapStateToProps","user"],"mappings":";AAAA,OAAOA,KAAP,MAAkB,OAAlB;AACA,SAASC,IAAT,EAAeC,QAAf,QAA+B,kBAA/B;AACA,SAASC,OAAT,QAAwB,aAAxB;AACA,SAASC,OAAT,QAAwB,WAAxB;AACA,OAAOC,KAAP,MAAkB,OAAlB;AACA,SAASC,OAAT,EAAkBC,MAAlB,QAAgC,YAAhC;;;;AAEA,MAAMC,IAAN,SAAmBR,KAAK,CAACS,SAAzB,CAAmC;AAAA;AAAA;AAAA,SACjCC,KADiC,GACzB;AACNC,MAAAA,MAAM,EAAE,EADF;AAENC,MAAAA,OAAO,EAAE,CAFH;AAGNC,MAAAA,cAAc,EAAE,KAHV;AAINC,MAAAA,QAAQ,EAAE,CAJJ;AAKNC,MAAAA,KAAK,EAAE,CALD;AAMNC,MAAAA,KAAK,EAAE,CAND;AAONC,MAAAA,QAAQ,EAAE,CAPJ;AAQNC,MAAAA,GAAG,EAAE,CARC;AASNC,MAAAA,eAAe,EAAE,CATX;AAUNC,MAAAA,cAAc,EAAE,KAVV;AAWNC,MAAAA,aAAa,EAAE,EAXT;AAYNC,MAAAA,UAAU,EAAE,EAZN;AAaNC,MAAAA,WAAW,EAAE,EAbP;AAcNC,MAAAA,QAAQ,EAAE;AAdJ,KADyB;;AAAA,SAkBjCC,YAlBiC,GAkBjBC,CAAD,IAAO;AACpB,YAAM;AAAEC,QAAAA,IAAF;AAAQC,QAAAA;AAAR,UAAkBF,CAAC,CAACG,MAA1B;AAEA,WAAKC,QAAL,CAAc;AAAE,SAACH,IAAD,GAAQC;AAAV,OAAd;AACD,KAtBgC;;AAAA,SAwBjCG,kBAxBiC,GAwBZ,MAAM;AACzB,WAAKD,QAAL,CAAc;AAAEV,QAAAA,cAAc,EAAE,CAAC,KAAKV,KAAL,CAAWU;AAA9B,OAAd;AACD,KA1BgC;;AAAA,SA4BjCY,OA5BiC,GA4BvB,MAAM;AACd3B,MAAAA,KAAK,CAAC4B,GAAN,CAAW,GAAE7B,OAAQ,iBAAgB,KAAK8B,KAAL,CAAWC,UAAX,CAAsBC,OAAQ,EAAnE,EACGC,IADH,CACSC,GAAD,IAAS;AACb,aAAKR,QAAL,CAAc;AACZnB,UAAAA,MAAM,EAAE2B,GAAG,CAACC,IAAJ,CAASC,OADL;AAEZ1B,UAAAA,QAAQ,EAAEwB,GAAG,CAACC,IAAJ,CAASzB,QAFP;AAGZC,UAAAA,KAAK,EAAEuB,GAAG,CAACC,IAAJ,CAASxB,KAHJ;AAIZC,UAAAA,KAAK,EAAEsB,GAAG,CAACC,IAAJ,CAASvB;AAJJ,SAAd;AAMD,OARH,EASGyB,KATH,CASUC,GAAD,IAAS;AACdC,QAAAA,KAAK,CAAC,iBAAD,CAAL;AACAC,QAAAA,OAAO,CAACC,GAAR,CAAYH,GAAZ;AACD,OAZH;AAaD,KA1CgC;;AAAA,SA4CjCI,SA5CiC,GA4CpBC,MAAD,IAAY;AACtB,YAAM;AAAEjC,QAAAA;AAAF,UAAe,KAAKJ,KAA1B;AACA,WAAKoB,QAAL,CAAc;AAAEjB,QAAAA,cAAc,EAAE;AAAlB,OAAd;AACAR,MAAAA,KAAK,CAAC2C,KAAN,CAAa,GAAE5C,OAAQ,mBAAkB2C,MAAO,EAAhD,EAAmD;AACjDjC,QAAAA;AADiD,OAAnD,EAGGuB,IAHH,CAGQ,MAAM;AACV,aAAKL,OAAL;AACAW,QAAAA,KAAK,CAAC,0BAAD,CAAL;AACAM,QAAAA,MAAM,CAACC,QAAP,CAAgBC,MAAhB;AACD,OAPH,EAQGV,KARH,CAQUC,GAAD,IAAS;AACdE,QAAAA,OAAO,CAACC,GAAR,CAAYH,GAAZ;AACD,OAVH;AAWD,KA1DgC;;AAAA,SA4DjCU,gBA5DiC,GA4DbL,MAAD,IAAY;AAC7B1C,MAAAA,KAAK,CAACgD,MAAN,CAAc,GAAEjD,OAAQ,oBAAmB2C,MAAO,EAAlD,EACGV,IADH,CACQ,MAAM;AACVM,QAAAA,KAAK,CAAC,sBAAD,CAAL;AACA,aAAKX,OAAL;AACAiB,QAAAA,MAAM,CAACC,QAAP,CAAgBC,MAAhB;AACD,OALH,EAMGV,KANH,CAMS,MAAM;AACXE,QAAAA,KAAK,CAAC,6BAAD,CAAL;AACD,OARH;AASD,KAtEgC;;AAAA,SAwEjCW,aAxEiC,GAwEjB,MAAM;AACpBjD,MAAAA,KAAK,CAACkD,IAAN,CAAY,GAAEnD,OAAQ,sBAAtB,EAA6C;AAC3CgC,QAAAA,OAAO,EAAE,KAAKF,KAAL,CAAWC,UAAX,CAAsBC;AADY,OAA7C,EAGCC,IAHD,CAGOC,GAAD,IAAS;AACb,aAAKR,QAAL,CAAc;AACZb,UAAAA,QAAQ,EAAEqB,GAAG,CAACC,IAAJ,CAASC,OAAT,CAAiB,CAAjB,EAAoBvB,QADlB;AAEZC,UAAAA,GAAG,EAAEoB,GAAG,CAACC,IAAJ,CAASC,OAAT,CAAiB,CAAjB,EAAoBvB,QAApB,GAA+B,GAFxB;AAGZE,UAAAA,eAAe,EAAEmB,GAAG,CAACC,IAAJ,CAASC,OAAT,CAAiB,CAAjB,EAAoBvB,QAApB,GAAgCqB,GAAG,CAACC,IAAJ,CAASC,OAAT,CAAiB,CAAjB,EAAoBvB,QAApB,GAA+B,GAA/D,GAAuE,KAAKP,KAAL,CAAWC,MAAX,CAAkB6C,MAAlB,GAA2B;AAHvG,SAAd;AAKD,OATD,EAUCf,KAVD,CAUQC,GAAD,IAAS;AACdC,QAAAA,KAAK,CAAC,kCAAD,CAAL;AACAC,QAAAA,OAAO,CAACC,GAAR,CAAYH,GAAZ;AACD,OAbD;AAcD,KAvFgC;;AAAA,SAgGjCe,aAhGiC,GAgGjB,MAAM;AACpB,WAAKC,iBAAL;AACA,WAAKC,SAAL;AACA,WAAK7B,QAAL,CAAc;AAAEN,QAAAA,QAAQ,EAAE;AAAZ,OAAd;AACD,KApGgC;;AAAA,SAsGjCkC,iBAtGiC,GAsGb,MAAM;AACxBrD,MAAAA,KAAK,CAACkD,IAAN,CAAY,GAAEnD,OAAQ,WAAtB,EAAkC;AAChCmB,QAAAA,WAAW,EAAE,KAAKqC,cAAL,GAAsBC,QAAtB;AADmB,OAAlC,EAGCxB,IAHD,CAGOC,GAAD,IAAS;AACbK,QAAAA,KAAK,CAAC,iDAAD,CAAL;AACAC,QAAAA,OAAO,CAACC,GAAR,CAAYP,GAAZ;AACD,OAND,EAOCG,KAPD,CAOQC,GAAD,IAAS;AACdC,QAAAA,KAAK,CAAC,eAAD,CAAL;AACAC,QAAAA,OAAO,CAACC,GAAR,CAAYH,GAAZ;AACD,OAVD;AAWD,KAlHgC;;AAAA,SAoHjCiB,SApHiC,GAoHrB,MAAM;AAChBtD,MAAAA,KAAK,CAAC2C,KAAN,CAAa,GAAE5C,OAAQ,kBAAvB,EAA0C;AACxC0D,QAAAA,WAAW,EAAE,KAAKC,cAAL;AAD2B,OAA1C,EAGC1B,IAHD,CAGOC,GAAD,IAAS;AACbK,QAAAA,KAAK,CAAC,qCAAD,CAAL;AACAC,QAAAA,OAAO,CAACC,GAAR,CAAYP,GAAZ;AACD,OAND,EAOCG,KAPD,CAOQC,GAAD,IAAS;AACdC,QAAAA,KAAK,CAAC,iCAAD,CAAL;AACAC,QAAAA,OAAO,CAACC,GAAR,CAAYH,GAAZ;AACD,OAVD;AAWD,KAhIgC;;AAAA,SAkIjCqB,cAlIiC,GAkIhB,MAAM;AACrB,aAAO,KAAKrD,KAAL,CAAWC,MAAX,CAAkBqD,GAAlB,CAAsB,CAACC,IAAD,EAAOC,KAAP,KAAiB;AAC5C,eACED,IAAI,CAACrD,OADP;AAGD,OAJM,CAAP;AAKD,KAxIgC;;AAAA,SA0IjCgD,cA1IiC,GA0IhB,MAAM;AACrB,YAAMO,CAAC,GAAG,IAAIC,IAAJ,EAAV;AAEA,aAAO,KAAK1D,KAAL,CAAWC,MAAX,CAAkBqD,GAAlB,CAAsB,CAACC,IAAD,EAAOC,KAAP,KAAiB;AAC5C,eACG,UAAS,KAAKhC,KAAL,CAAWC,UAAX,CAAsBC,OAAQ,KAAI6B,IAAI,CAACnD,QAAS,KAAImD,IAAI,CAACI,aAAL,GAAqBJ,IAAI,CAACnD,QAA1B,GAAqC,GAAI,KAAImD,IAAI,CAACI,aAAL,GAAqBJ,IAAI,CAACnD,QAAS,MAAKqD,CAAC,CAACG,WAAF,EAAgB,IAAGH,CAAC,CAACI,QAAF,KAAe,CAAE,IAAGJ,CAAC,CAACK,OAAF,EAAY,IAAGL,CAAC,CAACM,QAAF,EAAa,IAAGN,CAAC,CAACO,UAAF,EAAe,IAAGP,CAAC,CAACQ,UAAF,EAAe,OAAM,KAAKjE,KAAL,CAAWW,aAAc,OAAM,KAAKX,KAAL,CAAWY,UAAW,6BAA4B2C,IAAI,CAACW,UAAW,SADnW;AAGD,OAJM,CAAP;AAKD,KAlJgC;;AAAA,SAoJjCC,SApJiC,GAoJrB,MAAM;AAChB,aAAO,KAAKnE,KAAL,CAAWC,MAAX,CAAkBqD,GAAlB,CAAsB,CAACC,IAAD,EAAOC,KAAP,KAAiB;AAC5C,4BACE;AAAA,kCACE;AAAI,YAAA,SAAS,EAAC,cAAd;AAAA,sBAA8BA,KAAK,GAAG;AAAtC;AAAA;AAAA;AAAA;AAAA,kBADF,eAEE;AAAI,YAAA,SAAS,EAAC,cAAd;AAAA,sBAA8BD,IAAI,CAACa;AAAnC;AAAA;AAAA;AAAA;AAAA,kBAFF,eAGE;AAAI,YAAA,SAAS,EAAC,cAAd;AAAA,8BAAkCb,IAAI,CAACI,aAAN,CAAqBU,cAArB,CAAoC,IAApC,CAAjC;AAAA;AAAA;AAAA;AAAA;AAAA,kBAHF,eAIE;AAAI,YAAA,SAAS,EAAC,cAAd;AAAA,mCACE;AAAK,cAAA,GAAG,EAAEd,IAAI,CAACe,aAAf;AAA8B,cAAA,GAAG,EAAC,EAAlC;AAAqC,cAAA,KAAK,EAAE;AAAEC,gBAAAA,MAAM,EAAE;AAAV;AAA5C;AAAA;AAAA;AAAA;AAAA;AADF;AAAA;AAAA;AAAA;AAAA,kBAJF,eAOE;AAAI,YAAA,SAAS,EAAC,cAAd;AAAA,uBACG,CAAC,KAAKvE,KAAL,CAAWG,cAAZ,gBACC;AACE,cAAA,SAAS,EAAC,cADZ;AAEE,cAAA,IAAI,EAAC,UAFP;AAGE,cAAA,GAAG,EAAC,GAHN;AAIE,cAAA,QAAQ,EAAC,MAJX;AAKE,cAAA,YAAY,EAAEoD,IAAI,CAACnD,QALrB;AAME,cAAA,IAAI,EAAC,QANP;AAOE,cAAA,KAAK,EAAE;AAAEoE,gBAAAA,KAAK,EAAE;AAAT,eAPT;AAQE,cAAA,GAAG,EAAEjB,IAAI,CAACkB;AARZ;AAAA;AAAA;AAAA;AAAA,oBADD,gBAYC;AACE,cAAA,SAAS,EAAC,cADZ;AAEE,cAAA,QAAQ,EAAGzD,CAAD,IAAO,KAAKD,YAAL,CAAkBC,CAAlB,CAFnB;AAGE,cAAA,GAAG,EAAC,GAHN;AAIE,cAAA,IAAI,EAAC,UAJP;AAKE,cAAA,YAAY,EAAEuC,IAAI,CAACnD,QALrB;AAME,cAAA,IAAI,EAAC,QANP;AAOE,cAAA,KAAK,EAAE;AAAEoE,gBAAAA,KAAK,EAAE;AAAT,eAPT;AAQE,cAAA,GAAG,EAAEjB,IAAI,CAACkB;AARZ;AAAA;AAAA;AAAA;AAAA,oBAbJ;AAAA;AAAA;AAAA;AAAA;AAAA,kBAPF,eAiCE;AAAI,YAAA,SAAS,EAAC,cAAd;AAAA,8BAAkClB,IAAI,CAAClD,KAAN,CAAagE,cAAb,CAA4B,IAA5B,CAAjC;AAAA;AAAA;AAAA;AAAA;AAAA,kBAjCF,eAkCE;AAAI,YAAA,SAAS,EAAC,cAAd;AAAA,sBACG,CAAC,KAAKrE,KAAL,CAAWG,cAAZ,gBACC;AAAA,sCACE;AACE,gBAAA,SAAS,EAAC,iBADZ;AAEE,gBAAA,OAAO,EAAE,MAAM,KAAKiB,QAAL,CAAc;AAAEjB,kBAAAA,cAAc,EAAE;AAAlB,iBAAd,CAFjB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,sBADF,eAOE;AACE,gBAAA,OAAO,EAAE,MAAM,KAAKuC,gBAAL,CAAsBa,IAAI,CAACrD,OAA3B,CADjB;AAEE,gBAAA,SAAS,EAAC,gBAFZ;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,sBAPF;AAAA,4BADD,gBAgBC;AAAA,qCACE;AACE,gBAAA,OAAO,EAAE,MAAM,KAAKkC,SAAL,CAAemB,IAAI,CAACrD,OAApB,CADjB;AAEE,gBAAA,SAAS,EAAC,iBAFZ;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AADF;AAjBJ;AAAA;AAAA;AAAA;AAAA,kBAlCF;AAAA;AAAA;AAAA;AAAA;AAAA,gBADF;AAgED,OAjEM,CAAP;AAkED,KAvNgC;AAAA;;AAyFjCwE,EAAAA,iBAAiB,GAAG;AAClB,SAAKpD,OAAL;AACA,SAAKsB,aAAL;AACA,SAAKM,cAAL;AACA,SAAKG,cAAL;AACD;;AA2HDsB,EAAAA,MAAM,GAAG;AACP,QAAI,CAAC,KAAKnD,KAAL,CAAWC,UAAX,CAAsBmD,QAA3B,EAAqC;AACnC,0BAAO,QAAC,QAAD;AAAU,QAAA,EAAE,EAAC;AAAb;AAAA;AAAA;AAAA;AAAA,cAAP;AACD;;AAED,QAAI,KAAK5E,KAAL,CAAWc,QAAf,EAAyB;AACvB,0BAAO,QAAC,QAAD;AAAU,QAAA,EAAE,EAAC;AAAb;AAAA;AAAA;AAAA;AAAA,cAAP;AACD;;AAED,QAAI,CAAC,KAAKd,KAAL,CAAWC,MAAX,CAAkB6C,MAAvB,EAA+B;AAC7B,0BACE;AAAK,QAAA,KAAK,EAAE;AAAE+B,UAAAA,OAAO,EAAE,MAAX;AAAmBC,UAAAA,aAAa,EAAE,QAAlC;AAA4CC,UAAAA,UAAU,EAAE,QAAxD;AAAkEC,UAAAA,cAAc,EAAE,QAAlF;AAA4FC,UAAAA,SAAS,EAAE;AAAvG,SAAZ;AAAA,gCACE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,gBADF,eAEE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,gBAFF;AAAA;AAAA;AAAA;AAAA;AAAA,cADF;AAMD;;AAED,wBACE;AAAK,MAAA,SAAS,EAAC,iBAAf;AAAA,8BACE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,cADF,eAEE;AAAK,QAAA,SAAS,EAAC,UAAf;AAAA,gCACE;AAAK,UAAA,SAAS,EAAC,mBAAf;AAAA,iCACE;AAAO,YAAA,SAAS,EAAC,OAAjB;AAAA,oCACE;AAAO,cAAA,SAAS,EAAC,aAAjB;AAAA,qCACE;AAAA,wCACE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,wBADF,eAEE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,wBAFF,eAGE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,wBAHF,eAIE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,wBAJF,eAKE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,wBALF,eAME;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,wBANF,eAOE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,wBAPF;AAAA;AAAA;AAAA;AAAA;AAAA;AADF;AAAA;AAAA;AAAA;AAAA,oBADF,eAYE;AAAA,wBAEG,KAAKd,SAAL;AAFH;AAAA;AAAA;AAAA;AAAA,oBAZF,eAgBE;AAAO,cAAA,SAAS,EAAC,UAAjB;AAAA,qCACE;AAAA,uCACE;AAAI,kBAAA,OAAO,EAAC,GAAZ;AAAA,yCACE;AACE,oBAAA,OAAO,EAAE,KAAK9C,kBADhB;AAEE,oBAAA,SAAS,EAAC,iBAFZ;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AADF;AAAA;AAAA;AAAA;AAAA;AADF;AAAA;AAAA;AAAA;AAAA;AADF;AAAA;AAAA;AAAA;AAAA,oBAhBF;AAAA;AAAA;AAAA;AAAA;AAAA;AADF;AAAA;AAAA;AAAA;AAAA,gBADF,EAgCG,KAAKrB,KAAL,CAAWU,cAAX,gBACC;AAAK,UAAA,SAAS,EAAC,OAAf;AAAA,iCAEE;AAAK,YAAA,SAAS,EAAC,gBAAf;AAAA,oCACE;AAAK,cAAA,SAAS,EAAC,aAAf;AAAA,qCACE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AADF;AAAA;AAAA;AAAA;AAAA,oBADF,eAIE;AAAK,cAAA,SAAS,EAAC,WAAf;AAAA,sCACE;AAAK,gBAAA,SAAS,EAAC,iEAAf;AAAA,wCACE;AAAM,kBAAA,SAAS,EAAC,kBAAhB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,wBADF,eAEE;AAAA,oCAAW,KAAKV,KAAL,CAAWO,QAAZ,CAAsB8D,cAAtB,CAAqC,IAArC,CAAV;AAAA;AAAA;AAAA;AAAA;AAAA,wBAFF;AAAA;AAAA;AAAA;AAAA;AAAA,sBADF,eAKE;AAAK,gBAAA,SAAS,EAAC,iEAAf;AAAA,wCACE;AAAM,kBAAA,SAAS,EAAC,kBAAhB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,wBADF,eAEE;AAAA,oCAAW,KAAKrE,KAAL,CAAWQ,GAAZ,CAAiB6D,cAAjB,CAAgC,IAAhC,CAAV;AAAA;AAAA;AAAA;AAAA;AAAA,wBAFF;AAAA;AAAA;AAAA;AAAA;AAAA,sBALF,eASE;AAAK,gBAAA,SAAS,EAAC,iEAAf;AAAA,wCACE;AAAM,kBAAA,SAAS,EAAC,kBAAhB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,wBADF,eAEE;AAAA,oCAAU,CAAC,KAAKrE,KAAL,CAAWC,MAAX,CAAkB6C,MAAlB,GAA2B,KAA5B,EAAmCuB,cAAnC,CAAkD,IAAlD,CAAV;AAAA;AAAA;AAAA;AAAA;AAAA,wBAFF;AAAA;AAAA;AAAA;AAAA;AAAA,sBATF,eAaE;AAAK,gBAAA,SAAS,EAAC,iEAAf;AAAA,wCACE;AAAM,kBAAA,SAAS,EAAC,kBAAhB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,wBADF,eAEE;AAAA,oCAAW,KAAKrE,KAAL,CAAWS,eAAZ,CAA6B4D,cAA7B,CAA4C,IAA5C,CAAV;AAAA;AAAA;AAAA;AAAA;AAAA,wBAFF;AAAA;AAAA;AAAA;AAAA;AAAA,sBAbF;AAAA;AAAA;AAAA;AAAA;AAAA,oBAJF,eAsBE;AAAK,cAAA,SAAS,EAAC,sBAAf;AAAA,sCACE;AAAO,gBAAA,OAAO,EAAC,eAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,sBADF,eAEE;AAAA;AAAA;AAAA;AAAA,sBAFF,eAGE;AAAQ,gBAAA,QAAQ,EAAE,KAAKtD,YAAvB;AAAqC,gBAAA,IAAI,EAAC,eAA1C;AAA0D,gBAAA,SAAS,EAAC,eAApE;AAAoF,gBAAA,QAAQ,MAA5F;AAAA,wCACE;AAAQ,kBAAA,KAAK,EAAC,eAAd;AAA8B,kBAAA,QAAQ,MAAtC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,wBADF,eAIE;AAAQ,kBAAA,KAAK,EAAC,OAAd;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,wBAJF,eAKE;AAAQ,kBAAA,KAAK,EAAC,KAAd;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,wBALF,eAME;AAAQ,kBAAA,KAAK,EAAC,QAAd;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,wBANF;AAAA;AAAA;AAAA;AAAA;AAAA,sBAHF,eAWE;AAAA;AAAA;AAAA;AAAA,sBAXF,eAYE;AAAA;AAAA;AAAA;AAAA,sBAZF,eAcE;AAAO,gBAAA,OAAO,EAAC,YAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,sBAdF,eAeE;AAAA;AAAA;AAAA;AAAA,sBAfF,eAgBE;AAAQ,gBAAA,QAAQ,EAAE,KAAKA,YAAvB;AAAqC,gBAAA,IAAI,EAAC,YAA1C;AAAuD,gBAAA,SAAS,EAAC,cAAjE;AAAA,wCACE;AAAQ,kBAAA,KAAK,EAAC,KAAd;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,wBADF,eAEE;AAAQ,kBAAA,KAAK,EAAC,KAAd;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,wBAFF,eAGE;AAAQ,kBAAA,KAAK,EAAC,MAAd;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,wBAHF,eAIE;AAAQ,kBAAA,KAAK,EAAC,UAAd;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,wBAJF;AAAA;AAAA;AAAA;AAAA;AAAA,sBAhBF;AAAA;AAAA;AAAA;AAAA;AAAA,oBAtBF,eA8CE;AAAK,cAAA,SAAS,EAAC,aAAf;AAAA,qCACE;AAAK,gBAAA,SAAS,EAAC,4DAAf;AAAA,wCACE;AACE,kBAAA,SAAS,EAAC,mBADZ;AAEE,kBAAA,IAAI,EAAC,QAFP;AAGE,kBAAA,IAAI,EAAC,SAHP;AAIE,kBAAA,QAAQ,EAAC,MAJX;AAKE,kBAAA,YAAY,EAAG,MAAM,KAAKf,KAAL,CAAWS,eAAZ,CAA6B4D,cAA7B,CAA4C,IAA5C,CAAkD;AALxE;AAAA;AAAA;AAAA;AAAA,wBADF,eAQE;AACE,kBAAA,OAAO,EAAE,KAAKtB,aADhB;AAEE,kBAAA,SAAS,EAAC,sBAFZ;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,wBARF;AAAA;AAAA;AAAA;AAAA;AAAA;AADF;AAAA;AAAA;AAAA;AAAA,oBA9CF;AAAA;AAAA;AAAA;AAAA;AAAA;AAFF;AAAA;AAAA;AAAA;AAAA,gBADD,GAoEG,IApGN;AAAA;AAAA;AAAA;AAAA;AAAA,cAFF;AAAA;AAAA;AAAA;AAAA;AAAA,YADF;AA2GD;;AAtVgC;;AAyVnC,MAAMmC,eAAe,GAAIlF,KAAD,IAAW;AACjC,SAAO;AACLyB,IAAAA,UAAU,EAAEzB,KAAK,CAACmF;AADb,GAAP;AAGD,CAJD;;AAMA,eAAe1F,OAAO,CAACyF,eAAD,CAAP,CAAyBpF,IAAzB,CAAf","sourcesContent":["import React from \"react\";\r\nimport { Link, Redirect } from \"react-router-dom\";\r\nimport { connect } from 'react-redux';\r\nimport { URL_API } from \"../helper\";\r\nimport Axios from 'axios'\r\nimport { NavItem, Button } from \"reactstrap\";\r\n\r\nclass Cart extends React.Component {\r\n  state = {\r\n    dbcart: [],\r\n    id_cart: 0,\r\n    editQtyChecked: false,\r\n    cart_qty: 0,\r\n    total: 0,\r\n    stock: 0,\r\n    subtotal: 0,\r\n    tax: 0,\r\n    grandTotalPrice: 0,\r\n    isCheckoutMode: false,\r\n    paymentMethod: \"\",\r\n    expedition: \"\",\r\n    insertQuery: \"\",\r\n    redirect: false\r\n  };\r\n\r\n  inputHandler = (e) => {\r\n    const { name, value } = e.target;\r\n\r\n    this.setState({ [name]: value });\r\n  };\r\n\r\n  checkoutModeToggle = () => {\r\n    this.setState({ isCheckoutMode: !this.state.isCheckoutMode });\r\n  };\r\n\r\n  getData = () => {\r\n    Axios.get(`${URL_API}/cart/getCart/${this.props.userGlobal.id_user}`)\r\n      .then((res) => {\r\n        this.setState({\r\n          dbcart: res.data.results,\r\n          cart_qty: res.data.cart_qty,\r\n          total: res.data.total,\r\n          stock: res.data.stock,\r\n        });\r\n      })\r\n      .catch((err) => {\r\n        alert(\"Cannot Get Data\");\r\n        console.log(err);\r\n      });\r\n  };\r\n\r\n  updateQty = (cartId) => {\r\n    const { cart_qty } = this.state;\r\n    this.setState({ editQtyChecked: false });\r\n    Axios.patch(`${URL_API}/cart/updateQty/${cartId}`, {\r\n      cart_qty,\r\n    })\r\n      .then(() => {\r\n        this.getData();\r\n        alert(\"berhasil update Quantity\");\r\n        window.location.reload()\r\n      })\r\n      .catch((err) => {\r\n        console.log(err);\r\n      });\r\n  };\r\n\r\n  deleteBtnHandler = (cartId) => {\r\n    Axios.delete(`${URL_API}/cart/deleteCart/${cartId}`)\r\n      .then(() => {\r\n        alert(\"berhasil delete cart\");\r\n        this.getData();\r\n        window.location.reload()\r\n      })\r\n      .catch(() => {\r\n        alert(\"terjadi kesalahan di server\");\r\n      });\r\n  };\r\n\r\n  subtotalPrice = () => {\r\n    Axios.post(`${URL_API}/cart/subtotal-price`, {\r\n      id_user: this.props.userGlobal.id_user\r\n    })\r\n    .then((res) => {\r\n      this.setState({ \r\n        subtotal: res.data.results[0].subtotal,\r\n        tax: res.data.results[0].subtotal * 0.1,\r\n        grandTotalPrice: res.data.results[0].subtotal + (res.data.results[0].subtotal * 0.1) + (this.state.dbcart.length * 10000)\r\n      })\r\n    })\r\n    .catch((err) => {\r\n      alert(\"Cannot Count Cart Subtotal Price\")\r\n      console.log(err)\r\n    })\r\n  }\r\n\r\n  componentDidMount() {\r\n    this.getData();\r\n    this.subtotalPrice()\r\n    this.mapInsertQuery()\r\n    this.mapDeleteQuery()\r\n  }\r\n\r\n  payBtnHandler = () => {\r\n    this.insertTransaction()\r\n    this.clearCart()\r\n    this.setState({ redirect: true })\r\n  }\r\n\r\n  insertTransaction = () => {\r\n    Axios.post(`${URL_API}/cart/pay`, {\r\n      insertQuery: this.mapInsertQuery().toString()\r\n    })\r\n    .then((res) => {\r\n      alert(\"Please Continue to Upload Your Proof of Payment\")\r\n      console.log(res)\r\n    })\r\n    .catch((err) => {\r\n      alert(\"Payment Error\")\r\n      console.log(err)\r\n    })\r\n  }\r\n\r\n  clearCart = () => {\r\n    Axios.patch(`${URL_API}/cart/clear-cart`, {\r\n      deleteQuery: this.mapDeleteQuery()\r\n    })\r\n    .then((res) => {\r\n      alert(\"Cart will be Cleared After Checkout\")\r\n      console.log(res)\r\n    })\r\n    .catch((err) => {\r\n      alert(\"Clear Cart After Checkout Error\")\r\n      console.log(err)\r\n    })\r\n  }\r\n\r\n  mapDeleteQuery = () => {\r\n    return this.state.dbcart.map((item, index) => {\r\n      return (\r\n        item.id_cart\r\n      )\r\n    })\r\n  }\r\n\r\n  mapInsertQuery = () => {\r\n    const d = new Date()\r\n\r\n    return this.state.dbcart.map((item, index) => {\r\n      return (\r\n        `(null, ${this.props.userGlobal.id_user}, ${item.cart_qty}, ${item.product_price * item.cart_qty * 0.1}, ${item.product_price * item.cart_qty}, '${d.getFullYear()}-${d.getMonth() + 1}-${d.getDate()} ${d.getHours()}:${d.getMinutes()}:${d.getSeconds()}', '${this.state.paymentMethod}', '${this.state.expedition}', 10000, null, 'unpaid', ${item.id_product}, null)`\r\n      )\r\n    })\r\n  }\r\n\r\n  printData = () => {\r\n    return this.state.dbcart.map((item, index) => {\r\n      return (\r\n        <tr>\r\n          <td className=\"align-middle\">{index + 1}</td>\r\n          <td className=\"align-middle\">{item.product_name}</td>\r\n          <td className=\"align-middle\">Rp.{(item.product_price).toLocaleString(\"id\")}</td>\r\n          <td className=\"align-middle\">\r\n            <img src={item.product_image} alt=\"\" style={{ height: \"125px\" }} />\r\n          </td>\r\n          <td className=\"align-middle\">\r\n            {!this.state.editQtyChecked ? (\r\n              <input\r\n                className=\"align-middle\"\r\n                name=\"cart_qty\"\r\n                min=\"1\"\r\n                disabled=\"true\"\r\n                defaultValue={item.cart_qty}\r\n                type=\"number\"\r\n                style={{ width: \"50px\" }}\r\n                max={item.bottle_stock}\r\n              />\r\n            ) : (\r\n              <input\r\n                className=\"align-middle\"\r\n                onChange={(e) => this.inputHandler(e)}\r\n                min=\"1\"\r\n                name=\"cart_qty\"\r\n                defaultValue={item.cart_qty}\r\n                type=\"number\"\r\n                style={{ width: \"50px\" }}\r\n                max={item.bottle_stock}\r\n              />\r\n            )}\r\n            bottle\r\n          </td>\r\n          <td className=\"align-middle\">Rp.{(item.total).toLocaleString(\"id\")}</td>\r\n          <td className=\"align-middle\">\r\n            {!this.state.editQtyChecked ? (\r\n              <>\r\n                <button\r\n                  className=\"btn btn-primary\"\r\n                  onClick={() => this.setState({ editQtyChecked: true })}\r\n                >\r\n                  Edit\r\n                </button>\r\n                <button\r\n                  onClick={() => this.deleteBtnHandler(item.id_cart)}\r\n                  className=\"btn btn-danger\"\r\n                >\r\n                  Delete\r\n                </button>\r\n              </>\r\n            ) : (\r\n              <>\r\n                <button\r\n                  onClick={() => this.updateQty(item.id_cart)}\r\n                  className=\"btn btn-primary\"\r\n                >\r\n                  Save\r\n                </button>\r\n              </>\r\n            )}\r\n          </td>\r\n        </tr>\r\n      );\r\n    });\r\n  };\r\n\r\n  render() {\r\n    if (!this.props.userGlobal.username) {\r\n      return <Redirect to=\"/\" />;\r\n    }\r\n\r\n    if (this.state.redirect) {\r\n      return <Redirect to=\"/transaction\" />\r\n    }\r\n\r\n    if (!this.state.dbcart.length) {\r\n      return (\r\n        <div style={{ display: \"flex\", flexDirection: \"column\", alignItems: \"center\", justifyContent: \"center\", marginTop: \"50px\" }}>\r\n          <h2>Your Cart is Empty</h2>\r\n          <h2>Please Fill your Cart to Start Shopping ðŸ˜Š</h2>\r\n        </div>\r\n      )\r\n    }\r\n\r\n    return (\r\n      <div className=\"p-5 text-center\">\r\n        <h1>Cart</h1>\r\n        <div className=\"row mt-5\">\r\n          <div className=\"col-9 text-center\">\r\n            <table className=\"table\">\r\n              <thead className=\"thead-light\">\r\n                <tr>\r\n                  <th>no</th>\r\n                  <th>Product</th>\r\n                  <th>Price</th>\r\n                  <th>Image</th>\r\n                  <th>Quantity</th>\r\n                  <th>Total Price</th>\r\n                  <th>Action</th>\r\n                </tr>\r\n              </thead>\r\n              <tbody>\r\n                {/* {this.renderCart()} */}\r\n                {this.printData()}\r\n              </tbody>\r\n              <tfoot className=\"bg-light\">\r\n                <tr>\r\n                  <td colSpan=\"9\">\r\n                    <button\r\n                      onClick={this.checkoutModeToggle}\r\n                      className=\"btn btn-success\"\r\n                    >\r\n                      Checkout\r\n                    </button>\r\n                  </td>\r\n                </tr>\r\n              </tfoot>\r\n            </table>\r\n          </div>\r\n          {this.state.isCheckoutMode ? (\r\n            <div className=\"col-3\">\r\n              {/* Form Checkout */}\r\n              <div className=\"card text-left\">\r\n                <div className=\"card-header\">\r\n                  <strong>Order Summary</strong>\r\n                </div>\r\n                <div className=\"card-body\">\r\n                  <div className=\"d-flex my-2 flex-row justify-content-between align-items-center\">\r\n                    <span className=\"font-weight-bold\">Subtotal Price</span>\r\n                    <span>Rp {(this.state.subtotal).toLocaleString(\"id\")} </span>\r\n                  </div>\r\n                  <div className=\"d-flex my-2 flex-row justify-content-between align-items-center\">\r\n                    <span className=\"font-weight-bold\">Tax Fee (10%)</span>\r\n                    <span>Rp {(this.state.tax).toLocaleString(\"id\")} </span>\r\n                  </div>\r\n                  <div className=\"d-flex my-2 flex-row justify-content-between align-items-center\">\r\n                    <span className=\"font-weight-bold\">Shipping Cost</span>\r\n                    <span>Rp {(this.state.dbcart.length * 10000).toLocaleString(\"id\")} </span>\r\n                  </div>\r\n                  <div className=\"d-flex my-2 flex-row justify-content-between align-items-center\">\r\n                    <span className=\"font-weight-bold\">Grand Total Price</span>\r\n                    <span>Rp {(this.state.grandTotalPrice).toLocaleString(\"id\")} </span>\r\n                  </div>\r\n                </div>\r\n                <div className=\"card-body border-top\">\r\n                  <label htmlFor=\"paymentMethod\">Payment Method</label>\r\n                  <br />\r\n                  <select onChange={this.inputHandler} name=\"paymentMethod\" className=\"custom-select\" multiple>\r\n                    <option value=\"bank transfer\" selected>\r\n                      Bank Transfer\r\n                    </option>\r\n                    <option value=\"gopay\">Gopay</option>\r\n                    <option value=\"ovo\">Ovo</option>\r\n                    <option value=\"paypal\">Paypal</option>\r\n                  </select>\r\n                  <br />\r\n                  <br />\r\n                  {/* <input onChange={this.inputHandler} type=\"text\" className=\"form-control mb-3\" name=\"paymentMethod\" /> */}\r\n                  <label htmlFor=\"expedition\">Shipping</label>\r\n                  <br />\r\n                  <select onChange={this.inputHandler} name=\"expedition\" className=\"form-control\">\r\n                    <option value=\"jne\">JNE</option>\r\n                    <option value=\"j&t\">J&T</option>\r\n                    <option value=\"tiki\">TIKI</option>\r\n                    <option value=\"anteraja\">Anter Aja</option>\r\n                  </select>\r\n                  {/* <input onChange={this.inputHandler} type=\"text\" className=\"form-control\" name=\"expedition\" /> */}\r\n                </div>\r\n                <div className=\"card-footer\">\r\n                  <div className=\"d-flex flex-row justify-content-between align-items-center\">\r\n                    <input\r\n                      className=\"form-control mx-1\"\r\n                      type=\"string\"\r\n                      name=\"payment\"\r\n                      disabled=\"true\"\r\n                      defaultValue={`Rp ${(this.state.grandTotalPrice).toLocaleString(\"id\")}`}\r\n                    />\r\n                    <button\r\n                      onClick={this.payBtnHandler}\r\n                      className=\"btn btn-success mx-1\"\r\n                    >\r\n                      Pay\r\n                    </button>\r\n                  </div>\r\n                </div>\r\n              </div>\r\n            </div>\r\n          ) : null}\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nconst mapStateToProps = (state) => {\r\n  return {\r\n    userGlobal: state.user,\r\n  };\r\n};\r\n\r\nexport default connect(mapStateToProps)(Cart);"]},"metadata":{},"sourceType":"module"}